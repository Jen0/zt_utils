{"version":3,"sources":["webpack:////Users/jeno/Documents/HBuilderProjects/XZT/components/LazyLoad.vue?8c78","webpack:////Users/jeno/Documents/HBuilderProjects/XZT/components/LazyLoad.vue?d7ee","webpack:////Users/jeno/Documents/HBuilderProjects/XZT/components/LazyLoad.vue?546f","webpack:////Users/jeno/Documents/HBuilderProjects/XZT/components/LazyLoad.vue?4b74","webpack:////Users/jeno/Documents/HBuilderProjects/XZT/components/LazyLoad.vue","webpack:////Users/jeno/Documents/HBuilderProjects/XZT/components/LazyLoad.vue?5d86","webpack:////Users/jeno/Documents/HBuilderProjects/XZT/components/LazyLoad.vue?275e"],"names":["api","uni","PX_UNIT","observerMap","Object","create","waterfallMap","boxClassName","boxClass","boxWidth","boxHeight","itemClassName","itemClass","lastIndexArr","colNumber","colHeightArr","colIndexArr","animalDistance","standardWidth","device","getSystemInfoSync","deviceWidth","screenWidth","screenRate","calcRate","val","defaultOptions","verticalDistance","horizontalDistance","startTime","lazyImgIndex","props","imageClass","type","String","default","lazyImgURL","paddingLeft","Number","paddingTop","childClass","allData","Array","data","dataList","watch","deep","immediate","handler","newV","oldV","length","forEach","item","i","assign","push","init","mounted","beforeDestroy","clearObserve","methods","imgLoaded","evt","index","getRect","then","handlerWaterfall","clickIt","$emit","Date","calcParentPos","calcColNum","$nextTick","console","log","generateObserve","Promise","resolve","reject","observer","createIntersectionObserver","relativeTo","bottom","top","observe","res","lastFlag","intersectionRatio","lazyTop","includes","$set","boundingClientRect","observerKeys","keys","key","disconnect","setTimeout","width","height","Math","floor","getRectAll","handlerWaterfallItem","pos","minHeight","min","minHeightIndex","indexOf","minIndex","lazyLeft","className","createSelectorQuery","in","select","exec","selectAll"],"mappings":"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","file":"components/LazyLoad.js","sourcesContent":["import { render, staticRenderFns } from \"./LazyLoad.vue?vue&type=template&id=18819e39&scoped=true&\"\nimport script from \"./LazyLoad.vue?vue&type=script&lang=js&\"\nexport * from \"./LazyLoad.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LazyLoad.vue?vue&type=style&index=0&id=18819e39&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18819e39\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('18819e39', component.options)\n    } else {\n      api.reload('18819e39', component.options)\n    }\n    module.hot.accept(\"./LazyLoad.vue?vue&type=template&id=18819e39&scoped=true&\", function () {\n      api.rerender('18819e39', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/jeno/Documents/HBuilderProjects/XZT/components/LazyLoad.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./LazyLoad.vue?vue&type=template&id=18819e39&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./LazyLoad.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./LazyLoad.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst api = uni;\nconst PX_UNIT = 'px';\n// 监听的对象集合\n\nlet observerMap = Object.create(null);\n// 保存索引对应正常的top值\nlet waterfallMap = Object.create(null);\n\n// 页面盒子\nconst boxClassName = 'lazy-box';\nconst boxClass = '.lazy-box';\nlet boxWidth;\nlet boxHeight;\n// 每个item Class\nconst itemClassName = 'lazy-item';\nconst itemClass = '.lazy-item';\n\n// 每页最后一个索引的下标集合，并且已经触发过加载事件的下标\nconst lastIndexArr = [];\n\n// 列数，默认0\nlet colNumber = 0;\n// 每列高度 数组\nconst colHeightArr = [];\n// 每列的最后一个下标\nconst colIndexArr = [];\n/** 动画部分变量 start */\n// 动画移动的距离\nconst animalDistance = 50;\n/** 动画部分变量 end */\n// 屏幕宽是750的比率,\n// 标准宽度\nconst standardWidth = 750;\nconst device = api.getSystemInfoSync();\nconst deviceWidth = device.screenWidth;\nconst screenRate = deviceWidth / standardWidth;\n// 长度计算（upx转px）\nconst calcRate = val => val * screenRate;\n\nconst defaultOptions = {\n\tverticalDistance: 0,\n\thorizontalDistance: 0\n};\nlet startTime;\n// 图片懒加载\nlet lazyImgIndex = false;\nexport default {\n\tprops: {\n\t\timageClass: {\n\t\t\ttype: String,\n\t\t\tdefault: '.image'\n\t\t},\n\t\tlazyImgURL: {\n\t\t\ttype: String,\n\t\t\tdefault:\n\t\t\t\t'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1575128156488&di=3dee1b332268909d0a58f5e5d377fb25&imgtype=0&src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F01286f5a05131ca80121985c7fdd07.gif'\n\t\t},\n\t\tpaddingLeft: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t},\n\t\tpaddingTop: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t},\n\t\t// 添加子类class\n\t\tchildClass: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\t// 横向间距\n\t\tverticalDistance: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20\n\t\t},\n\t\t// 竖向间距\n\t\thorizontalDistance: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20\n\t\t},\n\t\tallData: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tPX_UNIT: PX_UNIT,\n\t\t\tboxClassName: boxClassName,\n\t\t\titemClassName: itemClassName,\n\t\t\titemClass: itemClass,\n\t\t\tdataList: []\n\t\t};\n\t},\n\twatch: {\n\t\tallData: {\n\t\t\tdeep: true,\n\t\t\timmediate: true,\n\t\t\thandler(newV, oldV) {\n\t\t\t\t// 新的长度 长于 旧的的长度 表示加载了下一页的数据\n\t\t\t\tif (newV && (!oldV || (oldV && newV.length > oldV.length))) {\n\t\t\t\t\tnewV.forEach((item, i) => {\n\t\t\t\t\t\tif (this.dataList[i]) {\n\t\t\t\t\t\t\tObject.assign(this.dataList[i], item);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.dataList.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.init();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {},\n\tbeforeDestroy() {\n\t\tthis.clearObserve();\n\t},\n\tmethods: {\n\t\t// 图片加载完成\n\t\timgLoaded(evt, index) {\n\t\t\tthis.getRect(`${itemClass}-${index} ${this.imageClass}`).then(async data => {\n\t\t\t\tlazyImgIndex = index;\n\t\t\t\tawait this.handlerWaterfall();\n\t\t\t\t// await this.generateObserve();\n\t\t\t});\n\t\t},\n\t\t// 点击item\n\t\tclickIt(item, evt) {\n\t\t\tthis.$emit('clickItem', item, evt);\n\t\t},\n\t\t// 初始化\n\t\tasync init() {\n\t\t\tstartTime = +new Date();\n\t\t\t// 先计算父元素的宽高\n\t\t\tawait this.calcParentPos();\n\t\t\t// 计算列数\n\t\t\tawait this.calcColNum();\n\t\t\t// 执行瀑布流 和 懒加载\n\t\t\tthis.$nextTick(async () => {\n\t\t\t\tconsole.log(startTime);\n\t\t\t\tawait this.handlerWaterfall();\n\t\t\t\tconsole.log('处理瀑布流耗时：', +new Date() - startTime);\n\t\t\t\tawait this.generateObserve();\n\t\t\t\tconsole.log('处理懒加载耗时：', +new Date() - startTime);\n\t\t\t});\n\t\t},\n\t\t// 绑定监听\n\t\tgenerateObserve() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.dataList.forEach((item, i) => {\n\t\t\t\t\t// 性能优化\n\t\t\t\t\tif (observerMap[i]) return false;\n\t\t\t\t\t// 指定父级窗口\n\t\t\t\t\tlet observer = api.createIntersectionObserver(this).relativeTo(boxClass, { bottom: animalDistance, top: animalDistance });\n\t\t\t\t\t// 指定页面窗口\n\t\t\t\t\t// else observer = api.createIntersectionObserver(this).relativeToViewport();\n\t\t\t\t\t// 绑定可视事件\n\t\t\t\t\tobserver.observe(`${this.itemClass}-${i}`, res => {\n\t\t\t\t\t\tconst lastFlag = i === this.dataList.length - 1;\n\t\t\t\t\t\t// 在窗口可视范围内\n\t\t\t\t\t\tif (res.intersectionRatio > 0) {\n\t\t\t\t\t\t\t// 最后一个显示在可视区域，默认已经到底，可以加载更多数据\n\t\t\t\t\t\t\tif (item.lazyTop && lastFlag && !lastIndexArr.includes(i)) {\n\t\t\t\t\t\t\t\tlastIndexArr.push(i);\n\t\t\t\t\t\t\t\t// 触发给父组件\n\t\t\t\t\t\t\t\tconsole.log('触发');\n\t\t\t\t\t\t\t\tthis.$emit('onBottom');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// 图片懒加载 到位\n\t\t\t\t\t\t\tthis.$set(this.dataList[i], 'lazyImg', true);\n\t\t\t\t\t\t\t// top值归位\n\t\t\t\t\t\t\tthis.$set(this.dataList[i], 'lazyTop', waterfallMap[i]);\n\t\t\t\t\t\t\t// 显示\n\t\t\t\t\t\t\tthis.$set(this.dataList[i], 'lazyShow', true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 如果目标节点的边界\n\t\t\t\t\t\t\tlet {\n\t\t\t\t\t\t\t\tboundingClientRect: { bottom }\n\t\t\t\t\t\t\t} = res;\n\t\t\t\t\t\t\t// 如果目标节点的边界 bottom 大于 父元素的高，就是从下而上，否则是从上而下。\n\t\t\t\t\t\t\tif (bottom >= boxHeight) {\n\t\t\t\t\t\t\t\t// 如果消失在可视范围内，就稍微向上移动点距离\n\t\t\t\t\t\t\t\tthis.$set(this.dataList[i], 'lazyTop', this.dataList[i].lazyTop + animalDistance);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$set(this.dataList[i], 'lazyTop', this.dataList[i].lazyTop - animalDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// 隐藏\n\t\t\t\t\t\t\tthis.$set(this.dataList[i], 'lazyShow', false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (lastFlag) {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tobserverMap[i] = observer;\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t// 删除监听\n\t\tclearObserve() {\n\t\t\tconst observerKeys = Object.keys(observerMap);\n\t\t\tif (observerKeys.length > 0) {\n\t\t\t\tobserverKeys.forEach(key => observerMap[key].disconnect());\n\t\t\t\tsetTimeout(()=> observerMap = Object.create(null));\n\t\t\t}\n\t\t},\n\t\t// 计算父元素的宽高\n\t\tasync calcParentPos() {\n\t\t\tif (boxWidth && boxHeight) return Promise.resolve();\n\t\t\tconst data = await this.getRect(boxClass);\n\t\t\tconst { width, height } = data;\n\t\t\tboxWidth = width;\n\t\t\tboxHeight = height;\n\t\t\treturn Promise.resolve(data);\n\t\t},\n\t\t// 计算列数\n\t\tasync calcColNum() {\n\t\t\tif (this.dataList.length > 0) {\n\t\t\t\t// 计算一行可以有几列（总宽度+间隙  除以  单项宽度+间隙）\n\t\t\t\t// 计算距离\n\t\t\t\tconst data = await this.getRect(`${itemClass}-0`);\n\t\t\t\tcolNumber = Math.floor((boxWidth + calcRate(this.verticalDistance)) / (Number(data.width) + calcRate(this.verticalDistance)));\n\t\t\t}\n\t\t\treturn Promise.resolve(colNumber);\n\t\t},\n\t\t// 瀑布流布局处理\n\t\thandlerWaterfall(data) {\n\t\t\treturn this.getRectAll(this.itemClass).then(data => {\n\t\t\t\tthis.handlerWaterfallItem(data);\n\t\t\t\treturn Promise.resolve();\n\t\t\t});\n\t\t},\n\t\t// handler waterfall item\n\t\thandlerWaterfallItem(data) {\n\t\t\tdata.forEach((pos, i) => {\n\t\t\t\t// 性能优化，定位过的item，不用再计算了。\n\t\t\t\tif (waterfallMap[i] || waterfallMap[i] === 0) return;\n\t\t\t\tif (i < colNumber) {\n\t\t\t\t\tcolHeightArr.push(pos.height);\n\t\t\t\t\tcolIndexArr.push(i);\n\t\t\t\t\tthis.$set(this.dataList[i], 'lazyLeft', calcRate(this.paddingLeft) + i * (pos.width + calcRate(this.verticalDistance)));\n\t\t\t\t\tthis.$set(this.dataList[i], 'lazyTop', calcRate(this.paddingTop));\n\t\t\t\t\t// 记录已经定位的下标\n\t\t\t\t\twaterfallMap[i] = this.dataList[i].lazyTop;\n\t\t\t\t} else {\n\t\t\t\t\t// 最小高度\n\t\t\t\t\tconst minHeight = Math.min(...colHeightArr);\n\t\t\t\t\t// 最小高度的下标---colHeightArr中的\n\t\t\t\t\tconst minHeightIndex = colHeightArr.indexOf(minHeight);\n\t\t\t\t\t// 最小高度的下标---dataList中的\n\t\t\t\t\tconst minIndex = colIndexArr[minHeightIndex];\n\t\t\t\t\t//  获取对应下标的元素的位置，\n\t\t\t\t\tthis.$set(this.dataList[i], 'lazyLeft', this.dataList[minIndex].lazyLeft);\n\t\t\t\t\tthis.$set(this.dataList[i], 'lazyTop', calcRate(this.paddingTop) + minHeight + calcRate(this.horizontalDistance) + animalDistance);\n\t\t\t\t\t// 更新最小高度\n\t\t\t\t\tcolHeightArr[minHeightIndex] = minHeight + pos.height + calcRate(this.horizontalDistance);\n\t\t\t\t\t// 更新每列的下标\n\t\t\t\t\tcolIndexArr[minHeightIndex] = i;\n\t\t\t\t\t// 记录已经定位的下标\n\t\t\t\t\twaterfallMap[i] = this.dataList[i].lazyTop - animalDistance;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 获取元素的位置信息\n\t\tgetRect(className) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tapi.createSelectorQuery()\n\t\t\t\t\t.in(this)\n\t\t\t\t\t.select(className)\n\t\t\t\t\t.boundingClientRect(data => {\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.exec();\n\t\t\t});\n\t\t},\n\t\t// 获取所有元素的位置信息\n\t\tgetRectAll(className) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tapi.createSelectorQuery()\n\t\t\t\t\t.in(this)\n\t\t\t\t\t.selectAll(className)\n\t\t\t\t\t.boundingClientRect(data => {\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.exec();\n\t\t\t});\n\t\t}\n\t}\n};\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./LazyLoad.vue?vue&type=style&index=0&id=18819e39&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./LazyLoad.vue?vue&type=style&index=0&id=18819e39&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}